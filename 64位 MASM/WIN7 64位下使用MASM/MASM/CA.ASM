DATA SEGMENT
	TIP1 DB "THIS PROGRAM IS A CALCULATOR.",0AH,0DH,"$"
	TIP2 DB "PLEASE INPUT THE FIRST NUMBER:$"
	TIP3 DB 0AH,0DH,"PLEASE INPUT ONE OF THE OPERATORS +,-,*,/:$"
	TIP4 DB 0AH,0DH,"PLEASE INPUT THE SECOND NUMBER:$"
	NUM1 DW 16 DUP(0)
	NUM2 DW 16 DUP(0)
	X DW ?
	Y DW ?
	RES DW ?
	RESA DB 16 DUP(?)
	OP DB ?
DATA ENDS
CODE SEGMENT
	ASSUME CS:CODE,DS:DATA
	S:MOV AX,DATA
	MOV DS,AX
	LEA DX,TIP1
	MOV AH,9
	INT 21H

	MOV DX,OFFSET TIP2
	LEA BX,NUM1
	CALL INPUT16

	SHR SI,1
	LEA BX,NUM1
	CALL CHAG16
	MOV X,AX
	

	LEA DX,TIP3
	MOV AH,9
	INT 21H
	MOV AH,1
	INT 21H
	MOV OP,AL
	
	LEA DX,TIP4
	LEA BX,NUM2
	CALL INPUT16

	SHR SI,1
	LEA BX,NUM2
	CALL CHAG16
	MOV Y,AX

	CMP OP,'+'
	JZ L1
	CMP OP,'-'
	JZ L2
	CMP OP,'*'
	JZ L3
	CMP OP,'/'
	JZ L4

	L1:MOV AX,X
	ADD AX,Y
	MOV RES,AX
	JMP L5

	L2:MOV AX,X
	SUB AX,Y
	MOV RES,AX
	JMP L5

	L3:MOV AX,X
	MUL Y
	MOV RES,AX
	JMP L5

	L4:MOV AX,X
	MOV DX,0
	DIV Y
	MOV RES,AX
	JMP L5

	L5:MOV DL,'='
	MOV AH,2
	INT 21H
	
	CALL OUTPUT2

	MOV AH,4CH
	INT 21H

  INPUT PROC
	MOV AH,9
	INT 21H
	MOV CX,5
	MOV SI,0
	L7:MOV AH,1	
	INT 21H
	CMP AL,0DH
	JZ L12
	SUB AL,30H
	MOV AH,0
	MOV [BX][SI],AX
	INC SI
	INC SI
	LOOP L7
	L12:RET
  INPUT ENDP
  INPUT2 PROC
	MOV AH,9
	INT 21H
	MOV CX,16
	MOV SI,0
	L23:MOV AH,1	
	INT 21H
	CMP AL,0DH
	JZ L24
	SUB AL,30H
	MOV AH,0
	MOV [BX][SI],AX
	INC SI
	INC SI
	LOOP L23
	L24:RET
  INPUT2 ENDP
 INPUT16 PROC
	MOV AH,9
	INT 21H
	MOV CX,4
	MOV SI,0
	L26:MOV AH,1	
	INT 21H
	CMP AL,0DH
	JZ L27
	CMP AL,39H
	JLE L28
	SUB AL,7
	L28:AND AL,0FH
	MOV AH,0
	MOV [BX][SI],AX
	INC SI
	INC SI
	LOOP L26
	L27:RET
  INPUT16 ENDP
  CHAG10 PROC
	MOV CX,SI
	MOV AX,0
	MOV SI,0
	L8:MOV DI,10
	MUL DI
	ADD AX,[BX][SI]
	INC SI
	INC SI
	LOOP L8
	RET
  CHAG10 ENDP
 CHAG16 PROC
	MOV CX,SI
	MOV AX,0
	MOV SI,0
	L29:MOV DI,16
	MUL DI
	ADD AX,[BX][SI]
	INC SI
	INC SI
	LOOP L29
	RET
  CHAG16 ENDP
  CHAG2 PROC
	MOV CX,SI
	MOV AX,0
	MOV SI,0
	L25:MOV DI,2
	MUL DI
	ADD AX,[BX][SI]
	INC SI
	INC SI
	LOOP L25
	RET
  CHAG2 ENDP
  OUTPUT PROC
	MOV AX,RES
	MOV SI,0
	MOV BX,10
	L13:MOV DX,0
	DIV BX
	ADD DL,30H
	MOV RESA[SI],DL
	INC SI
	CMP AX,0
	JNZ L13
	L14:DEC SI
	MOV DL,RESA[SI]
	MOV AH,2
	INT 21H
	CMP SI,0
	JNZ L14
	RET
  OUTPUT ENDP
  OUTPUT2 PROC
	MOV AX,RES
	MOV SI,0
	MOV BX,2
	L15:MOV DX,0
	DIV BX
	ADD DL,30H
	MOV RESA[SI],DL
	INC SI
	CMP AX,0
	JNZ L15
	L16:DEC SI
	MOV DL,RESA[SI]
	MOV AH,2
	INT 21H
	CMP SI,0
	JNZ L16
	RET
   OUTPUT2 ENDP
   OUTPUT2C PROC
	MOV BX,RES
	MOV SI,0
	L18:SHR BX,1
	MOV DL,0
	JNC L17
	ADD DL,1
	L17:ADD DL,30H
	MOV RESA[SI],DL
	INC SI
	CMP BX,0
	JNZ L18
	L19:DEC SI
	MOV DL,RESA[SI]
	MOV AH,2
	INT 21H
	CMP SI,0
	JNZ L19
	RET
   OUTPUT2C ENDP
   OUTPUT16 PROC
	MOV AX,RES
	MOV SI,0
	MOV BX,16
	L20:MOV DX,0
	DIV BX
	CMP DL,10
	JL L22
	ADD DL,7
	L22:ADD DL,30H
	MOV RESA[SI],DL
	INC SI
	CMP AX,0
	JNZ L20
	L21:DEC SI
	MOV DL,RESA[SI]
	MOV AH,2
	INT 21H
	CMP SI,0
	JNZ L21
	RET
   OUTPUT16 ENDP
CODE ENDS
	END S